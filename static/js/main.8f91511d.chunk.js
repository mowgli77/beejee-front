(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{110:function(e,t,a){e.exports=a(236)},115:function(e,t,a){},116:function(e,t,a){},236:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(49),c=a.n(o),l=(a(115),a(116),a(19)),s=a(18),u=a(10),i=function(e){var t=e.todoItem,a=e.deleteToDoThunk,o=e.changeStatusThunk,c=e.adminChangedThunk,l=e.isAuth,u=e.showAlert,i=Object(n.useState)(!1),m=Object(s.a)(i,2),d=m[0],b=m[1],p=Object(n.useState)(t.todo),h=Object(s.a)(p,2),f=h[0],E=h[1];return r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.email),l?r.a.createElement("td",null," ",d?r.a.createElement("div",null,r.a.createElement("input",{autoFocus:!0,value:f,onChange:function(e){E(e.currentTarget.value)}}),r.a.createElement("button",{type:"button",onClick:function(){t.todo!==f?(c(t.id,f,1,l),b(!1)):u("There are no any changes")},className:"btn btn-dark btn-sm mt-n1 ml-2"},"Save"),r.a.createElement("button",{type:"button",onClick:function(){return b(!1)},className:"btn btn-dark btn-sm mt-n1 ml-2"},"Exit")):r.a.createElement("span",{onClick:function(){return b(!0)},role:"button"},t.todo)," "):r.a.createElement("td",null,t.todo),l?r.a.createElement("td",{className:"text-center"},r.a.createElement("input",{type:"checkbox",onClick:function(){var e=1===t.status?0:1;o(e,t.id)},checked:t.status})):r.a.createElement("td",{className:"text-center"},r.a.createElement("input",{type:"checkbox",checked:t.status})),r.a.createElement("td",{className:"text-center"},r.a.createElement("input",{type:"checkbox",checked:t.changed})),1==l&&r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-dark",onClick:function(){return a(t.id)}},"Delete Todo")))},m=a(9),d=a.n(m),b=a(22),p=a(106),h=a.n(p).a.create({baseURL:"https://l9dhv.sse.codesandbox.io/api"}),f=function(e){return h.post("/addtodo",e)},E=function(e){return h.delete("/delete/".concat(e))},O=function(e){return h.post("/auth",e)},v=function(e){return h.get("/getauth",e)},g=function(e){return h.post("/authstatus",{auth:e})},T=function(e,t){return h.post("/updatestatus",{status:e,id:t})},y=function(e,t,a,n){return h.post("/changed",{id:e,todo:t,changed:a,isAuth:n})},j=function(e,t){return{type:"CHANGE_STATUS",status:e,id:t}},k=function(e){return{type:"IS_AUTH",payload:e}},D=function(e){return function(t){t({type:"SHOW_ALERT",payload:e}),setTimeout((function(){return t({type:"HIDE_ALERT"})}),2500)}},A=function(){return function(){var e=Object(b.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("/todos");case 2:a=e.sent,t({type:"GET_TODOS",payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},N=function(e){return function(){var t=Object(b.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(e);case 2:t.sent;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(e){var t=e.sortNamesByABC,a=e.sortNamesByZYX,o=e.sortEmailsByABC,c=e.sortToDosByABC,l=e.sortEmailsByZYX,u=e.sortToDosByZYX,i=e.isAuth,m=Object(n.useState)(null),d=Object(s.a)(m,2),b=d[0],p=d[1],h=Object(n.useState)(null),f=Object(s.a)(h,2),E=f[0],O=f[1],v=Object(n.useState)(null),g=Object(s.a)(v,2),T=g[0],y=g[1];return r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",className:"align-middle "},r.a.createElement("button",{onClick:function(){O(null),y(null),b?1===b&&(a(),p(0)):(t(),p(1))},type:"button",className:"btn btn-dark"},"Name",0===b?r.a.createElement("i",{className:"large material-icons"},"expand_more"):1===b?r.a.createElement("i",{className:"large material-icons"},"expand_less"):null)),r.a.createElement("th",{scope:"col",className:"align-middle "},r.a.createElement("button",{onClick:function(){p(null),y(null),E?1===E&&(l(),O(0)):(o(),O(1))},type:"button",className:"btn btn-dark"},"Email",0===E?r.a.createElement("i",{className:"large material-icons"},"expand_more"):1===E?r.a.createElement("i",{className:"large material-icons"},"expand_less"):null)),r.a.createElement("th",{scope:"col",width:400,className:"align-middle "},r.a.createElement("button",{onClick:function(){p(null),O(null),T?1===T&&(u(),y(0)):(c(),y(1))},type:"button",className:"btn btn-dark"},"ToDo Description",0===T?r.a.createElement("i",{className:"large material-icons"},"expand_more"):1===T?r.a.createElement("i",{className:"large material-icons"},"expand_less"):null)),r.a.createElement("th",{scope:"col",width:100,className:"align-middle text-center"},"Status"),r.a.createElement("th",{scope:"col",width:100,className:"align-middle text-center"},"Changed by Administrator"),1==i&&r.a.createElement("th",{scope:"col",width:150,className:"align-middle "},"Delete Todo"))},_=a(40),w=function(e){for(var t=e.toDosCount,a=e.pageSize,o=e.onChangedPage,c=(Object(_.a)(e,["toDosCount","pageSize","onChangedPage"]),Math.ceil(t/a)),l=[],u=1;u<=c;u++)l.push(u);var i=Object(n.useState)(1),m=Object(s.a)(i,2),d=m[0],b=m[1],p=c-d>10&&d<=4?10:c-d>=6&&d>4?d+5:c,h=c-d<5?c-9:d>4?d-4:1;return r.a.createElement("div",{className:"d-flex justify-content-center "},r.a.createElement("ul",{className:"pagination ",role:"button"},c>0&&r.a.createElement("li",{className:"page-item ".concat(1===d?"disabled":null)},r.a.createElement("span",{className:"page-link btn btn-dark",onClick:function(){return function(e){o(e-2),b(e-1)}(d)}},"Previous")),l.filter((function(e){return p>=e&&e>=h})).map((function(e){return r.a.createElement("li",{className:"page-item ".concat(d===e?"active":null)},r.a.createElement("span",{className:"page-link",onClick:function(){return function(e){o(e-1),b(e)}(e)}},e))})),c>0&&r.a.createElement("li",{className:"page-item ".concat(d===c?"disabled":null)},r.a.createElement("span",{className:"page-link",onClick:function(){return function(e){o(e),b(e+1)}(d)}},"Next"))))},B=Object(u.b)((function(e){return{todos:e.toDoDatas.todos,toDosCount:e.toDoDatas.toDosCount,pageSize:e.toDoDatas.pageSize,alert:e.toDoDatas.alert,auth:e.toDoDatas.auth,isAuth:e.toDoDatas.isAuth}}),{getToDosThunk:A,deleteToDoThunk:function(e){return function(){var t=Object(b.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E(e);case 2:n=t.sent,a(A()),a(D(n.data));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getToDosCountThunk:function(){return function(){var e=Object(b.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.get("/count");case 2:a=e.sent,t({type:"TODOS_COUNT",payload:a.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},confirmAuthThunk:N,sortNamesByABC:function(){return{type:"SORT_NAMES_BY_ABC"}},sortNamesByZYX:function(){return{type:"SORT_NAMES_BY_ZYX"}},sortEmailsByABC:function(){return{type:"SORT_EMAILS_BY_ABC"}},sortToDosByABC:function(){return{type:"SORT_TODOS_BY_ABC"}},sortEmailsByZYX:function(){return{type:"SORT_EMAILS_BY_ZYX"}},sortToDosByZYX:function(){return{type:"SORT_TODOS_BY_ZYX"}},changeStatusThunk:function(e,t){return function(){var a=Object(b.a)(d.a.mark((function a(n){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,T(e,t);case 2:a.sent,n(j(e,t));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},adminChangedThunk:function(e,t,a,n){return function(){var r=Object(b.a)(d.a.mark((function r(o){return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v();case 2:if(1!==r.sent.data.auth){r.next=10;break}return r.next=6,y(e,t,a,n);case 6:r.sent,o(A()),r.next=11;break;case 10:o(D("You are not autorized"));case 11:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},showAlert:D})((function(e){var t=e.todos,a=e.getToDosThunk,o=e.deleteToDoThunk,c=e.getToDosCountThunk,u=e.pageSize,m=e.toDosCount,d=e.sortNamesByABC,b=e.isAuth,p=e.showAlert,h=e.sortNamesByZYX,f=e.sortEmailsByABC,E=e.sortToDosByABC,O=e.sortEmailsByZYX,v=e.sortToDosByZYX,g=e.alert,T=e.changeStatusThunk,y=e.adminChangedThunk,j=Object(n.useState)(Object(l.a)(t).splice(0,3)),k=Object(s.a)(j,2),D=k[0],A=k[1];Object(n.useEffect)((function(){a(),c()}),[]),Object(n.useEffect)((function(){A(Object(l.a)(t).splice(0,3))}),[t]);return r.a.createElement("div",null,g&&r.a.createElement("div",{className:"alert alert-danger mt-5 mb-n4",role:"alert"},g),r.a.createElement("table",{className:"table table-striped align-middle table-hover mt-5 mb-5 "},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement(S,{sortNamesByABC:d,sortNamesByZYX:h,sortEmailsByABC:f,sortToDosByABC:E,sortEmailsByZYX:O,sortToDosByZYX:v,isAuth:b})),r.a.createElement("tbody",null,D.map((function(e){return r.a.createElement(i,{todoItem:e,key:e.id,deleteToDoThunk:o,changeStatusThunk:T,adminChangedThunk:y,isAuth:b,showAlert:p})})))),0==D.length&&r.a.createElement("h1",{style:{textAlign:"center"}},"You don`t have tasks"),r.a.createElement(w,{toDosCount:m,pageSize:u,onChangedPage:function(e){A(Object(l.a)(t).splice(3*e,3))}}))})),C=a(238),x=a(237),Y=function(e){var t=e.input,a=e.meta,n=a.touched,o=a.error,c=a.warning,l=e.label,s=Object(_.a)(e,["input","meta","label"]);return r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("textarea",Object.assign({className:"form-control",placeholder:l},t,s)),n&&(o&&r.a.createElement("span",{style:{color:"red"}},o)||c&&r.a.createElement("span",{style:{color:"red"}},c))))},Z=function(e){var t=e.input,a=e.label,n=e.meta,o=n.touched,c=n.error,l=n.warning,s=Object(_.a)(e,["input","label","meta"]);return r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",Object.assign({className:"form-control",placeholder:a},t,s)),s.text,o&&(c&&r.a.createElement("span",{style:{color:"red"}},c)||l&&r.a.createElement("span",{style:{color:"red"}},l))))},X=function(e){return e?void 0:"! Required"},R=function(e){return function(t){return t&&t.length>e?"! Must be ".concat(e," characters or less"):void 0}},I=function(e){return e&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)?"! Invalid email address":void 0},L=R(20),M=R(100),z=Object(x.a)({form:"newToDo"})((function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement(C.a,{component:Z,name:"name",label:"Your name",validate:[X,L]})),r.a.createElement("div",null,r.a.createElement(C.a,{component:Z,name:"email",label:"Your email",validate:[X,I],type:"email"})),r.a.createElement("div",null,r.a.createElement(C.a,{component:Y,name:"todo",label:"Description of new ToDo",validate:[X,M]})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:"btn btn-dark"},"Add new ToDo")))})),H=Object(u.b)((function(e){return{todos:e.toDoDatas.todos,alert:e.toDoDatas.alert,newToDo:e.form.newToDo}}),{addNewToDoThunk:function(e){return function(){var t=Object(b.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(e);case 2:n=t.sent,a(D(n.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getToDosThunk:A})((function(e){var t=e.addNewToDoThunk,a=e.newToDo,n=e.alert,o=e.getToDosThunk;return r.a.createElement("div",{className:"mt-5"},n&&r.a.createElement("div",{className:"alert alert-success",role:"alert"},n),r.a.createElement(z,{onSubmit:function(e){if(e.name.trim().length>0&&e.email.trim().length>0&&e.todo.trim().length>0){var n={id:Date.now(),name:e.name,email:e.email,todo:e.todo,status:0,changed:0};t(n),o(),a.values.name=a.values.email=a.values.todo=""}}}))})),U=a(25),G=Object(u.b)((function(e){return{isAuth:e.toDoDatas.isAuth}}),{confirmAuthThunk:N,isAuthAction:k})((function(e){var t=e.isAuth,a=e.confirmAuthThunk,n=e.isAuthAction;return r.a.createElement("nav",{className:"navbar navbar-dark bg-dark view overlay"},r.a.createElement("div",{className:"container view overlay"},r.a.createElement("div",null,r.a.createElement("button",{type:"button",class:"btn btn-dark"},r.a.createElement(U.b,{exact:!0,to:"/",className:"navbar-brand"},"Home")),r.a.createElement("button",{type:"button",className:"btn btn-dark"},r.a.createElement(U.b,{exact:!0,to:"/addtodo",className:"navbar-brand"},"Add ToDo"))),r.a.createElement("div",null,t?r.a.createElement("button",{onClick:function(){a(0),n(0)},type:"button",className:"btn btn-light"},"Logout"):r.a.createElement(U.b,{exact:!0,to:"/auth",className:"nav-link"},r.a.createElement("button",{type:"button",className:"btn btn-light"},"Loginning")))))})),P=a(8),W=Object(x.a)({form:"autorization"})((function(e){var t=e.handleSubmit;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement(C.a,{component:Z,name:"login",label:"Your login",validate:[X]})),r.a.createElement("div",null,r.a.createElement(C.a,{component:Z,name:"password",label:"Your password",validate:[X],type:"password"})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",className:"btn btn-dark"},"Login")))})),F=a(109),q=Object(u.b)((function(e){return{alert:e.toDoDatas.alert,autorization:e.form.autorization,isAuth:e.toDoDatas.isAuth}}),{loginThunk:function(e){return function(){var t=Object(b.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(e);case 2:(n=t.sent).data?(a({type:"GET_AUTH",payload:n.data}),a(k(1)),a(N(1))):a(D("Invalid login or password!"));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},showAlert:D})((function(e){var t=e.autorization,a=e.alert,n=e.loginThunk,o=e.isAuth,c=e.showAlert;return r.a.createElement(r.a.Fragment,null,1==o&&r.a.createElement(F.a,{to:"/"}),a&&r.a.createElement("div",{className:"alert alert-danger mt-3",role:"alert"},a),r.a.createElement("div",{className:"d-flex justify-content-center mt-5"},r.a.createElement(W,{onSubmit:function(e){if(console.log(e),e.login.trim().length>0&&e.password.trim().length>0){var a={login:e.login,password:e.password};n(a),t.values.login=t.values.password=""}else c("The fields are empty")}})))}));var J=Object(u.b)(null,{getAuthThunk:function(){return function(){var e=Object(b.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:a=e.sent,t(k(a.data.auth));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.getAuthThunk;return Object(n.useEffect)((function(){t()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(G,null),r.a.createElement("div",{className:"container"},r.a.createElement(P.d,null,r.a.createElement(P.b,{exact:!0,path:"/",render:function(){return r.a.createElement(B,null)}}),r.a.createElement(P.b,{exact:!0,path:"/addtodo",render:function(){return r.a.createElement(H,null)}}),r.a.createElement(P.b,{exact:!0,path:"/auth",render:function(){return r.a.createElement(q,null)}}))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=a(108),V=a(7),K=a(4),Q={todos:[],toDosCount:null,pageSize:3,alert:null,auth:null,isAuth:0},ee=a(239),te=Object(V.c)({toDoDatas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TODOS":return Object(K.a)(Object(K.a)({},e),{},{todos:t.payload});case"TODOS_COUNT":return Object(K.a)(Object(K.a)({},e),{},{toDosCount:t.payload.q});case"GET_AUTH":return Object(K.a)(Object(K.a)({},e),{},{auth:t.payload});case"IS_AUTH":return Object(K.a)(Object(K.a)({},e),{},{isAuth:t.payload});case"CHANGE_STATUS":return Object(K.a)(Object(K.a)({},e),{},{todos:e.todos.map((function(e){return e.id===t.id?Object(K.a)(Object(K.a)({},e),{},{status:t.status}):e}))});case"ADMIN_CHANGED":return Object(K.a)(Object(K.a)({},e),{},{todos:e.todos.map((function(e){return e.id===t.id?Object(K.a)(Object(K.a)({},e),{},{changed:t.changed}):e}))});case"SHOW_ALERT":return Object(K.a)(Object(K.a)({},e),{},{alert:t.payload});case"HIDE_ALERT":return Object(K.a)(Object(K.a)({},e),{},{alert:null});case"SORT_NAMES_BY_ABC":return Object(K.a)(Object(K.a)({},e),{},{todos:Object(l.a)(e.todos).sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}))});case"SORT_NAMES_BY_ZYX":return Object(K.a)(Object(K.a)({},e),{},{todos:Object(l.a)(e.todos).reverse()});case"SORT_EMAILS_BY_ABC":return Object(K.a)(Object(K.a)({},e),{},{todos:Object(l.a)(e.todos).sort((function(e,t){return e.email>t.email?1:e.email<t.email?-1:0}))});case"SORT_EMAILS_BY_ZYX":return Object(K.a)(Object(K.a)({},e),{},{todos:Object(l.a)(e.todos).reverse()});case"SORT_TODOS_BY_ABC":return Object(K.a)(Object(K.a)({},e),{},{todos:Object(l.a)(e.todos).sort((function(e,t){return e.todo>t.todol?1:e.todo<t.todo?-1:0}))});case"SORT_TODOS_BY_ZYX":return Object(K.a)(Object(K.a)({},e),{},{todos:Object(l.a)(e.todos).reverse()});default:return e}},form:ee.a}),ae=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||V.d,ne=Object(V.e)(te,ae(Object(V.a)($.a)));c.a.render(r.a.createElement(U.a,null,r.a.createElement(u.a,{store:ne},r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[110,1,2]]]);
//# sourceMappingURL=main.8f91511d.chunk.js.map